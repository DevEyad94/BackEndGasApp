import './polyfills.server.mjs';
import{a as te,b as ie}from"./chunk-STBBZCNE.mjs";import{a as re}from"./chunk-K3MOAMR4.mjs";import{b as ne,c as ae,d as oe}from"./chunk-MHCTP4LA.mjs";import{d as Z,e as q,h as J,i as K,j as Q,p as W,r as ee}from"./chunk-444SJH6C.mjs";import"./chunk-KLHXEL3F.mjs";import"./chunk-VORNBINK.mjs";import{Bb as L,Cb as C,Db as O,Eb as F,Fa as s,Ka as M,Pa as Y,Ua as _,ba as v,bb as h,ca as y,da as w,ea as S,fb as e,gb as t,hb as c,kb as B,lb as g,mb as b,nc as H,oc as z,pc as G,rb as r,rc as U,sb as f,sc as $,tb as D,tc as X,v as V}from"./chunk-IILPPODV.mjs";import{e as ce,g as pe}from"./chunk-OFHM46N5.mjs";var le=ce((P,j)=>{"use strict";(function(m,p){typeof define=="function"&&define.amd?define([],p):typeof P<"u"?p():(p(),m.FileSaver={})})(P,function(){"use strict";function m(o,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function p(o,l,x){var d=new XMLHttpRequest;d.open("GET",o),d.responseType="blob",d.onload=function(){k(d.response,l,x)},d.onerror=function(){console.error("could not download file")},d.send()}function i(o){var l=new XMLHttpRequest;l.open("HEAD",o,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function a(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(l)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,T=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),k=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!T?function(o,l,x){var d=n.URL||n.webkitURL,u=document.createElement("a");l=l||o.name||"download",u.download=l,u.rel="noopener",typeof o=="string"?(u.href=o,u.origin===location.origin?a(u):i(u.href)?p(o,l,x):a(u,u.target="_blank")):(u.href=d.createObjectURL(o),setTimeout(function(){d.revokeObjectURL(u.href)},4e4),setTimeout(function(){a(u)},0))}:"msSaveOrOpenBlob"in navigator?function(o,l,x){if(l=l||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(m(o,x),l);else if(i(o))p(o,l,x);else{var d=document.createElement("a");d.href=o,d.target="_blank",setTimeout(function(){a(d)})}}:function(o,l,x,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof o=="string")return p(o,l,x);var u=o.type==="application/octet-stream",me=/constructor/i.test(n.HTMLElement)||n.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||u&&me||T)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var E=R.result;E=A?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=E:location=E,d=null},R.readAsDataURL(o)}else{var N=n.URL||n.webkitURL,I=N.createObjectURL(o);d?d.location=I:location.href=I,d=null,setTimeout(function(){N.revokeObjectURL(I)},4e4)}});n.saveAs=k.saveAs=k,typeof j<"u"&&(j.exports=k)})});var se=pe(le());var de=(m,p)=>({"border-blue-500 bg-blue-50 dark:bg-blue-900":m,"border-gray-200 dark:border-gray-600":p});function ue(m,p){if(m&1&&(e(0,"tr",38)(1,"td",39),r(2),t(),e(3,"td",40),r(4),C(5,"number"),t(),e(6,"td",40),r(7),t(),e(8,"td",40),r(9),t(),e(10,"td",40),r(11),C(12,"number"),t(),e(13,"td",40),r(14),C(15,"date"),t()()),m&2){let i=p.$implicit;s(2),f(i.fieldName),s(2),f(O(5,6,i.productionRate)),s(3),f(i.extractionYear),s(2),f(i.maintenanceType),s(2),D("$",F(12,8,i.maintenanceCost,"1.2-2"),""),s(3),f(F(15,11,i.lastMaintenanceDate,"medium"))}}function he(m,p){m&1&&(e(0,"tr",38)(1,"td",41),r(2,"No field data available"),t()())}function xe(m,p){m&1&&(e(0,"span",72),w(),e(1,"svg",73),c(2,"circle",74)(3,"path",75),t()())}function fe(m,p){if(m&1){let i=B();e(0,"div",42)(1,"div",43)(2,"div",44)(3,"h3",45),r(4,"Export Dashboard"),t(),e(5,"button",46),g("click",function(){v(i);let n=b();return y(n.closeExportModal())}),w(),e(6,"svg",47),c(7,"path",48),t()()(),S(),e(8,"div",49)(9,"p",50),r(10,"Choose export format:"),t(),e(11,"div",51)(12,"div",52),g("click",function(){v(i);let n=b();return y(n.setExportFormat("pdf"))}),e(13,"div",53),w(),e(14,"svg",54),c(15,"rect",55)(16,"path",56)(17,"rect",57)(18,"rect",58)(19,"rect",59)(20,"rect",60),t()(),S(),e(21,"span",61),r(22,"PDF"),t()(),e(23,"div",52),g("click",function(){v(i);let n=b();return y(n.setExportFormat("excel"))}),e(24,"div",62),w(),e(25,"svg",54),c(26,"rect",63)(27,"rect",64)(28,"path",65)(29,"path",66)(30,"path",67),t()(),S(),e(31,"span",61),r(32,"Excel"),t()()()(),e(33,"div",68)(34,"button",69),g("click",function(){v(i);let n=b();return y(n.closeExportModal())}),r(35," Cancel "),t(),e(36,"button",70),g("click",function(){v(i);let n=b();return y(n.exportDashboard())}),_(37,xe,4,0,"span",71),r(38),t()()()()}if(m&2){let i=b();s(12),h("ngClass",L(5,de,i.exportFormat==="pdf",i.exportFormat!=="pdf")),s(11),h("ngClass",L(8,de,i.exportFormat==="excel",i.exportFormat!=="excel")),s(13),h("disabled",i.isExporting),s(),h("ngIf",i.isExporting),s(),D(" ",i.isExporting?"Exporting...":"Export"," ")}}var Fe=(()=>{class m{dashboardService;zskService;fb;filterForm;maintenanceTypes=[];maintenanceTypeOptions=[];fields=[];fieldOptions=[];dashboardData;productionChartOption={};maintenanceCostChartOption={};totalProductionRate=0;totalMaintenanceCost=0;fieldCount=0;showExportModal=!1;exportFormat="pdf";isExporting=!1;constructor(i,a,n){this.dashboardService=i,this.zskService=a,this.fb=n}ngOnInit(){this.initFilterForm(),this.loadFilterOptions(),setTimeout(()=>{this.loadDashboardData()})}initFilterForm(){this.filterForm=this.fb.group({minProductionRate:[null],maxProductionRate:[null],extractionYear:[new Date().getFullYear()],fromYear:[null],toYear:[null],maintenanceTypeId:[null],minCost:[null],maxCost:[null],fieldId:[null]}),this.filterForm.valueChanges.subscribe(()=>{this.loadDashboardData()})}loadFilterOptions(){V({maintenanceTypes:this.zskService.getMaintenanceTypes(),fields:this.zskService.getFields()}).subscribe(i=>{this.maintenanceTypes=i.maintenanceTypes,this.maintenanceTypeOptions=this.maintenanceTypes.map(a=>({value:a.zMaintenanceTypeId,label:a.name})),this.fields=i.fields,this.fieldOptions=this.fields.map(a=>({value:a.zFieldId,label:a.name}))})}loadDashboardData(){let i=this.filterForm?.value||{};this.dashboardService.getDashboardData(i).subscribe({next:a=>{this.dashboardData=a,this.updateStats(),this.renderCharts()},error:a=>{console.error("Error loading dashboard data:",a)}})}updateStats(){this.dashboardData&&(this.totalProductionRate=this.dashboardData.totalProductionRate,this.totalMaintenanceCost=this.dashboardData.totalMaintenanceCost,this.fieldCount=this.dashboardData.fieldData?.length||0)}renderCharts(){this.renderProductionChart(),this.renderMaintenanceCostChart()}renderProductionChart(){if(!this.dashboardData?.productionRateChart)return;let i=this.dashboardData.productionRateChart;this.productionChartOption={backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:i.map(a=>a.period),axisLabel:{rotate:45,color:"#333"},axisLine:{lineStyle:{color:"#ccc"}}},yAxis:{type:"value",name:"Production Rate",nameTextStyle:{color:"#333"},axisLabel:{color:"#333"},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#eee"}}},series:[{name:"Production Rate",type:"bar",data:i.map(a=>a.productionRate),itemStyle:{color:"#3AA1FF"}}]}}renderMaintenanceCostChart(){if(!this.dashboardData?.maintenanceCostChart)return;let i=this.dashboardData.maintenanceCostChart;this.maintenanceCostChartOption={backgroundColor:"transparent",tooltip:{trigger:"axis",formatter:"{a} <br/>{b}: ${c}"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:i.map(a=>a.period),axisLabel:{rotate:45,color:"#333"},axisLine:{lineStyle:{color:"#ccc"}}},yAxis:{type:"value",name:"Maintenance Cost ($)",nameTextStyle:{color:"#333"},axisLabel:{color:"#333"},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{color:"#eee"}}},series:[{name:"Maintenance Cost",type:"line",data:i.map(a=>a.cost),itemStyle:{color:"#FF5722"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(255, 87, 34, 0.7)"},{offset:1,color:"rgba(255, 87, 34, 0.1)"}]}}}]}}openExportModal(){this.showExportModal=!0}closeExportModal(){this.showExportModal=!1}setExportFormat(i){this.exportFormat=i}exportDashboard(){this.isExporting=!0;let i=this.filterForm?.value||{};this.dashboardService.exportDashboardData(i,this.exportFormat).subscribe({next:a=>{let n=`dashboard-export-${new Date().toISOString().split("T")[0]}.${this.exportFormat==="pdf"?"pdf":"xlsx"}`;(0,se.saveAs)(a,n),this.isExporting=!1,this.closeExportModal()},error:a=>{console.error("Error exporting dashboard data:",a),this.isExporting=!1}})}static \u0275fac=function(a){return new(a||m)(M(re),M(oe),M(W))};static \u0275cmp=Y({type:m,selectors:[["app-dashboard"]],decls:82,vars:16,consts:[[1,"p-4","bg-gray-50","dark:bg-gray-800","min-h-screen"],[1,"mb-8","flex","justify-between","items-center"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","mb-4"],[1,"px-4","py-2","bg-blue-600","text-white","rounded","hover:bg-blue-700","flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"],[1,"bg-white","dark:bg-gray-700","p-4","rounded-lg","shadow","mb-6"],[1,"text-xl","font-semibold","text-gray-800","dark:text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4",3,"formGroup"],["formControlName","minProductionRate","type","number","label","Min Production Rate","placeholder","Minimum rate","id","minProductionRate","name","minProductionRate","inputMode","numeric"],["formControlName","maxProductionRate","type","number","label","Max Production Rate","placeholder","Maximum rate","id","maxProductionRate","name","maxProductionRate","inputMode","numeric"],["formControlName","extractionYear","type","number","label","Extraction Year","id","extractionYear","name","extractionYear","inputMode","numeric"],["formControlName","fromYear","type","number","label","From Year","id","fromYear","name","fromYear","inputMode","numeric"],["formControlName","toYear","type","number","label","To Year","id","toYear","name","toYear","inputMode","numeric"],["formControlName","maintenanceTypeId","label","Maintenance Type","id","maintenanceTypeId","name","maintenanceTypeId","placeholder","All Types",3,"options"],["formControlName","fieldId","label","Field","id","fieldId","name","fieldId","placeholder","All Fields",3,"options"],["formControlName","minCost","type","number","label","Min Cost","placeholder","Minimum cost","id","minCost","name","minCost","inputMode","numeric"],["formControlName","maxCost","type","number","label","Max Cost","placeholder","Maximum cost","id","maxCost","name","maxCost","inputMode","numeric"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"bg-white","dark:bg-gray-700","p-6","rounded-lg","shadow"],[1,"text-lg","font-medium","text-gray-900","dark:text-white","mb-2"],[1,"text-3xl","font-bold","text-green-600","dark:text-green-400"],[1,"text-3xl","font-bold","text-blue-600","dark:text-blue-400"],[1,"text-3xl","font-bold","text-purple-600","dark:text-purple-400"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-8"],[1,"bg-white","dark:bg-gray-700","p-4","rounded-lg","shadow"],[1,"text-lg","font-medium","text-gray-900","dark:text-white","mb-4"],[1,"h-80"],["echarts","",1,"h-full","w-full",3,"options"],[1,"bg-white","dark:bg-gray-700","p-4","rounded-lg","shadow","mb-8"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-600"],[1,"bg-gray-50","dark:bg-gray-800"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-300","uppercase","tracking-wider"],[1,"bg-white","dark:bg-gray-700","divide-y","divide-gray-200","dark:divide-gray-600"],["class","hover:bg-gray-100 dark:hover:bg-gray-600",4,"ngFor","ngForOf"],["class","hover:bg-gray-100 dark:hover:bg-gray-600",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],[1,"hover:bg-gray-100","dark:hover:bg-gray-600"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500","dark:text-gray-300"],["colspan","6",1,"px-6","py-4","whitespace-nowrap","text-sm","text-center","text-gray-500","dark:text-gray-300"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-lg","p-6","w-96","max-w-full"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"text-gray-500","hover:text-gray-700","dark:text-gray-300","dark:hover:text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-4"],[1,"text-gray-700","dark:text-gray-300","mb-2"],[1,"flex","space-x-4"],[1,"flex","flex-col","items-center","cursor-pointer","p-3","rounded-lg","border-2",3,"click","ngClass"],[1,"h-16","w-16","flex","items-center","justify-center","bg-blue-50","rounded-lg","mb-2"],["width","40","height","40","viewBox","0 0 40 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","40","height","40","rx","4","fill","#E9F0FE"],["d","M28 14H12C11.4477 14 11 14.4477 11 15V25C11 25.5523 11.4477 26 12 26H28C28.5523 26 29 25.5523 29 25V15C29 14.4477 28.5523 14 28 14Z","fill","#E9F0FE","stroke","#E94335","stroke-width","2"],["x","13","y","16","width","14","height","1","rx","0.5","fill","#E94335"],["x","13","y","18","width","14","height","1","rx","0.5","fill","#E94335"],["x","13","y","20","width","14","height","1","rx","0.5","fill","#E94335"],["x","13","y","22","width","8","height","1","rx","0.5","fill","#E94335"],[1,"text-gray-700","dark:text-gray-300"],[1,"h-16","w-16","flex","items-center","justify-center","bg-white","rounded-lg","mb-2"],["width","40","height","40","rx","4","fill","white"],["x","10","y","10","width","20","height","20","rx","2","fill","#4CAF50"],["d","M15 17H25","stroke","white","stroke-width","1.5","stroke-linecap","round"],["d","M15 20H25","stroke","white","stroke-width","1.5","stroke-linecap","round"],["d","M15 23H25","stroke","white","stroke-width","1.5","stroke-linecap","round"],[1,"flex","justify-end","mt-6"],[1,"px-4","py-2","bg-gray-200","text-gray-800","rounded","hover:bg-gray-300","dark:bg-gray-700","dark:text-white","dark:hover:bg-gray-600","mr-2",3,"click"],[1,"px-4","py-2","bg-blue-600","text-white","rounded","hover:bg-blue-700","flex","items-center",3,"click","disabled"],["class","mr-2",4,"ngIf"],[1,"mr-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(a,n){a&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Gas Condensate Dashboard"),t(),e(4,"button",3),g("click",function(){return n.openExportModal()}),w(),e(5,"svg",4),c(6,"path",5),t(),r(7," Export "),t()(),S(),e(8,"div",6)(9,"h2",7),r(10,"Filter Data"),t(),e(11,"form",8)(12,"div"),c(13,"app-text-input",9),t(),e(14,"div"),c(15,"app-text-input",10),t(),e(16,"div"),c(17,"app-text-input",11),t(),e(18,"div"),c(19,"app-text-input",12),t(),e(20,"div"),c(21,"app-text-input",13),t(),e(22,"div"),c(23,"app-zsk-select",14),t(),e(24,"div"),c(25,"app-zsk-select",15),t(),e(26,"div"),c(27,"app-text-input",16),t(),e(28,"div"),c(29,"app-text-input",17),t()()(),e(30,"div",18)(31,"div",19)(32,"h3",20),r(33,"Total Production Rate"),t(),e(34,"p",21),r(35),C(36,"number"),t()(),e(37,"div",19)(38,"h3",20),r(39,"Total Maintenance Cost"),t(),e(40,"p",22),r(41),C(42,"number"),t()(),e(43,"div",19)(44,"h3",20),r(45,"Field Count"),t(),e(46,"p",23),r(47),t()()(),e(48,"div",24)(49,"div",25)(50,"h3",26),r(51,"Production Rate by Period"),t(),e(52,"div",27),c(53,"div",28),t()(),e(54,"div",25)(55,"h3",26),r(56,"Maintenance Cost by Period"),t(),e(57,"div",27),c(58,"div",28),t()()(),e(59,"div",29)(60,"h3",26),r(61,"Field Data"),t(),e(62,"div",30)(63,"table",31)(64,"thead",32)(65,"tr")(66,"th",33),r(67,"Field Name"),t(),e(68,"th",33),r(69,"Production Rate"),t(),e(70,"th",33),r(71,"Extraction Year"),t(),e(72,"th",33),r(73,"Maintenance Type"),t(),e(74,"th",33),r(75,"Maintenance Cost"),t(),e(76,"th",33),r(77,"Last Maintenance"),t()()(),e(78,"tbody",34),_(79,ue,16,14,"tr",35)(80,he,3,0,"tr",36),t()()()()(),_(81,fe,39,11,"div",37)),a&2&&(s(11),h("formGroup",n.filterForm),s(12),h("options",n.maintenanceTypeOptions),s(2),h("options",n.fieldOptions),s(10),f(O(36,11,n.totalProductionRate)),s(6),D("$",F(42,13,n.totalMaintenanceCost,"1.2-2"),""),s(6),f(n.fieldCount),s(6),h("options",n.productionChartOption),s(5),h("options",n.maintenanceCostChartOption),s(21),h("ngForOf",n.dashboardData==null?null:n.dashboardData.fieldData),s(),h("ngIf",!(!(n.dashboardData==null||n.dashboardData.fieldData==null)&&n.dashboardData.fieldData.length)),s(),h("ngIf",n.showExportModal))},dependencies:[X,H,z,G,$,U,ee,J,Z,q,K,Q,ie,te,ne,ae],styles:[`canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}.dark[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{filter:brightness(.9)}
/*# sourceMappingURL=dashboard.component-YOXMQHAU.css.map */`]})}return m})();export{Fe as DashboardComponent};
//# sourceMappingURL=chunk-PVSRAJYM.mjs.map
